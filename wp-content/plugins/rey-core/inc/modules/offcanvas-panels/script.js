!function(o){"use strict";var n=function(t){this.$body=o("body"),this.isOpen=null,this.contentAdded=!1,this.$panel=!1,this.entryTimeline=!1,this.init=function(){this.$btn=o(t),this.settings=o.extend({id:"",gs:"",demand:!0,shift:!0,trigger:"click",position:"left",transition:"",transition_duration:700,animate_inside:!0,close_position:"inside",close_text:"",close_rotate:!1},JSON.parse(this.$btn.attr("data-offcanvas-settings")||"{}")),this.settings.shift&&(this.$body.addClass("--offcanvas-shift"),this.$body.addClass("--offcanvas-shift--"+this.settings.position)),this.maybe_get_content(),this.bind_events()},this.bind_events=function(){var n=this;"click"===this.settings.trigger?this.$btn.on("click",function(t){t.preventDefault(),n.isOpen?n.close():n.open()}):"hover"===this.settings.trigger&&this.$btn.on("mouseenter",function(t){n.open()}).on("mouseleave",function(t){n.close()}),o(document).on("rey/close_panels",function(t,e){"offcanvas-panels"!==e&&n.close()}),o(document).on("reycore/offcanvas/ajax_loaded",function(t,e){n.after_content_events()})},this.after_content_events=function(){var e=this;this.$closeBtn.on("click",function(t){t.preventDefault(),e.close()}),this.settings.animate_inside&&o(".elementor-column-wrap.elementor-element-populated",this.$content).each(function(t,e){o(e).css("transition-delay",75*t+"ms")}),"undefined"!=typeof elementorFrontend&&elementorFrontend.hooks&&o(".elementor-element",this.$content).each(function(t,e){var n=o(e),s=n.attr("data-element_type");"widget"===s&&(s=n.attr("data-widget_type")),elementorFrontend.hooks.doAction("frontend/element_ready/"+s,n,o)})},this.make_panel=function(){if(!this.$panel){var t=wp.template("reycore-offcanvas-tpl");this.$panel=o(t(this.settings)).appendTo(this.$body),this.$contentWrapper=o(".rey-offcanvas-contentWrapper",this.$panel),this.$content=o(".rey-offcanvas-content",this.$panel),this.$closeBtn=o(".rey-offcanvas-close",this.$panel),this.settings.animate_inside&&this.$panel.addClass("--animate-inside"),this.settings.close_rotate&&this.$closeBtn.addClass("--close-rotate"),this.settings.demand||this.$panel.removeClass("--loading");var e=this;if("undefined"!=typeof anime)switch(this.entryTimeline=anime.timeline({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration),autoplay:!1,begin:function(){e.isOpen=!0,e.$body.addClass("--offcanvas-active"),e.$panel.removeClass("--loading")},complete:function(){e.$panel.addClass("--active")}}),this.settings.transition){default:var n={left:{translateX:["-100%","0%"]},right:{translateX:["100%","0%"]},top:{translateY:["-100%","0%"]},bottom:{translateY:["100%","-100%"]}};this.entryTimeline.add(o.extend({targets:this.$contentWrapper[0]},n[this.settings.position]));break;case"slideskew":n={left:{opacity:[0,1],translateX:["-120%","0%"],skewX:["-7deg","0deg"]},right:{opacity:[0,1],translateX:["120%","0%"],skewX:["7deg","0deg"]},top:{opacity:[0,1],translateY:["-120%","0%"],skewY:["-7deg","0deg"]},bottom:{opacity:[0,1],translateY:["120%","-120%"],skewY:["7deg","0deg"]}};this.entryTimeline.add(o.extend({targets:this.$contentWrapper[0]},n[this.settings.position]));break;case"curtain":var s=o('<div class="rey-offcanvas-mask --m2" />').prependTo(this.$contentWrapper),i=o('<div class="rey-offcanvas-mask --m1" />').prependTo(this.$contentWrapper),a=(n={left:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},right:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},top:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}},bottom:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}}},{m1:"-="+.75*parseInt(this.settings.transition_duration),m2:"-="+.4*parseInt(this.settings.transition_duration)});this.entryTimeline.add(o.extend({targets:this.$contentWrapper[0]},n[this.settings.position].c)).add(o.extend({targets:s[0]},n[this.settings.position].m),a.m1).add(o.extend({targets:i[0]},n[this.settings.position].m),a.m2)}}},this.refreshScroll=function(){var t=this.$content;t.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(t[0])},this.maybe_get_content=function(){this.settings.demand||this.get_content()},this.get_content=function(){var e=this;this.make_panel(),""!==this.settings.gs&&void 0!==o.reyHelpers.params.ajaxurl&&void 0!==o.reyHelpers.params.ajax_nonce&&o.ajax({type:"POST",url:o.reyHelpers.params.ajaxurl,data:{action:"reycore_offcanvas_panel",gs:e.settings.gs,security:o.reyHelpers.params.ajax_nonce},dataType:"json",success:function(t){!t||t&&!t.success||(e.$content.html(t.data),e.refreshScroll(),e.contentAdded=!0,o(document).trigger("reycore/offcanvas/ajax_loaded",[t.data]),e.settings.demand&&e.animate_panel())}})},this.animate_panel=function(){"undefined"!=typeof anime&&this.entryTimeline&&this.entryTimeline.play()},this.open=function(){o(document).trigger("rey/close_panels",["offcanvas-panels"]),o.reyHelpers.overlay("site","open"),o.reyHelpers.doScroll.disable(),this.$btn.addClass("--active"),this.contentAdded?this.animate_panel():this.get_content()},this.close=function(){if(this.$panel&&this.isOpen){var t=this;anime(o.extend({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration)/2,targets:this.$contentWrapper[0],complete:function(){t.$body.removeClass("--offcanvas-active"),t.$panel.removeClass("--active"),t.$btn.removeClass("--active"),o.reyHelpers.overlay("site","close"),o.reyHelpers.doScroll.enable()}},{left:{translateX:["0%","-100%"]},right:{translateX:["0%","100%"]},top:{translateY:["0%","-100%"]},bottom:{translateY:["-100%","100%"]}}[this.settings.position])),this.isOpen=!1}},this.init()};o(document).ready(function(){o(".js-triggerBtn[data-offcanvas-settings]").each(function(t,e){new n(e)})})}(jQuery);
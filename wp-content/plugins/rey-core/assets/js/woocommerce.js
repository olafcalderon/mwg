!function(h){"use strict";var e=function(){this.init=function(){this.reyTheme=h.reyTheme,this.reyHelpers=h.reyHelpers,this.events(),this.genericHtml(),this.viewSelectorColumns(),this.productsGrids(),this.loopProductSlideshows(),this.miniCart.init(this),this.activeFilterCount(h(document)),this.ajaxSearch.init(this),this.accountPanel.init(this),this.wishlist.init(),this.quickview.init(this),this.overrideSelect2Defaults(),this.productVariations(),this.fixedSummary(),this.wcFilterSidebar.addCloseButton(),this.requestQuote.init(),this.AjaxAddToCartProductPage(),this.equalizeProductItems(),this.quantityButtonControls(),this.variableProductAddToCart(),this.productsCarousels(),this.customizeAtcButton(),this.wcAccountForms(),this.productPageMobileTabs(),this.refreshProductCountAjaxLoad()},this.events=function(){var a=this;h(document).on("click",".rey-filterBtn:not(.filter-btnMobile) .js-rey-filterBtn-open",function(e){e.preventDefault(),h(document).trigger("rey/close_panels",["filter-panel"]),h.reyHelpers.overlay("header","open"),a.wcFilterPanel.open()}),h(document).on("click",".filter-btnMobile .js-rey-filterBtn-open",function(e){e.preventDefault(),h(document).trigger("rey/close_panels",["filter-sidebar"]),h.reyHelpers.overlay("header","open"),a.wcFilterSidebar.open()}),h(".js-rey-sidePanel-close").on("click",function(e){e.preventDefault(),h(document).trigger("rey/close_panels")}),h(document).on("wcapf_started",function(e){a.reyTheme.elements.$body.addClass("--is-filtering"),h(".is-animated-entry").animate({visibility:"hidden",opacity:0},70)}),h(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){a.reyTheme.elements.$body.removeClass("--is-filtering"),a.reyTheme.general_html(t);var s=h("li.product",t);a.reyTheme.animateItems(s),a.equalizeProductItems(s),a.variableProductAddToCart(s,!0),a.activeFilterCount(t),a.loopProductSlideshows(t),h(document).trigger("rey/close_panels"),h.reyCore.doTooltips()}),h(document).on("rey/product/loaded",function(e,t,r){a.reyTheme.general_html(t),a.reyTheme.animateItems(t),a.doLoopItemSlideshows(h(".rey-productSlideshow",h(t))),a.equalizeProductItems(t),a.variableProductAddToCart(t),a.refreshProductCountAjaxLoad(t)}),h(document).on("rey/refresh_html",function(e,t){a.startVariationForms(t),a.productVariations(t),a.viewSelectorColumns(t)}),h(document).on("rey/close_panels",function(e,t){"mini-cart"!==t&&a.miniCart.close(),"account-panel"!==t&&a.accountPanel.close(),"filter-panel"!==t&&a.wcFilterPanel.close(),"filter-sidebar"!==t&&a.wcFilterSidebar.close(),"quickview"!==t&&a.quickview.close()}),h(document.body).on("wc_fragments_loaded",function(e){var t=h(".js-rey-headerCart"),r=h(".rey-headerCart-nb",t).text();r=parseInt(r),t.closest(".rey-headerCart-wrapper").attr("data-rey-cart-count",r),t.closest(".elementor-widget-reycore-header-cart").attr("data-rey-cart-count",r)}),h(document.body).on("removed_from_cart updated_wc_div",function(e){a.quantityButtonControls(".woocommerce-cart-form")}),h("div.product .woocommerce-review-link").on("click",function(e){e.preventDefault();var t=h(".rey-reviewsBtn");t.length&&(h("html, body").animate({scrollTop:t.offset().top-30},500),t.click())}),h(document).on("rey/view_selector/change_cols",function(e,t){h.reyThemeWooCommerce.equalizeProductItems(t.children())}),h(document.body).on("added_to_cart",function(e,t,r,s){if(void 0!==h.reyHelpers.params.added_to_cart_text){var a=h.reyHelpers.params.added_to_cart_text;if(!s.is("[data-atc-text]")||""!==(a=s.attr("data-atc-text"))){s.hasClass("single_add_to_cart_button")&&(s=h(".single_add_to_cart_button-text",s));var i=s.text();s.text(a),setTimeout(function(){s.text(i)},1e4)}}}),h(document).on("click",".woocommerce-store-notice__dismiss-link",function(){h.reyTheme.cssJs()}),h(document).on("click",".elementor-button-link.add_to_cart_button[data-product_id]",function(e){e.preventDefault()})},this.genericHtml=function(){if(!h.reyHelpers.is_desktop){var e=h(".single-skin--fullscreen .woocommerce-notices-wrapper");e.length&&e.detach().prependTo(h("div.product"))}},this.loopProductSlideshows=function(e){e=e||h(document);var t=h(".rey-productSlideshow",h(e));t.closest(".elementor-widget-container").length||this.doLoopItemSlideshows(t)},this.doLoopItemSlideshows=function(e){e.each(function(e,t){var s=h(t),r=s.closest("ul.products");if((h.reyHelpers.is_desktop||!reyParams.js_params.product_item_slideshow_disable_mobile)&&!r.hasClass("--prevent-thumbnail-sliders")&&!s.hasClass("--prevent-thumbnail-sliders")){var a=function(){r.hasClass("--msnry-initialised")&&r.masonry()};s.imagesLoaded(function(){s.on("init",function(e,t){1==reyParams.js_params.product_item_slideshow_dots_hover&&h("span",t.$dots).on("mouseenter",function(){t.$slider.slick("slickGoTo",parseInt(h(this).attr("data-index")))}),s.on("mouseenter",function(){t.$slider.slick("slickGoTo",1).slick("slickPlay")}).on("mouseleave",function(){t.$slider.slick("slickPause").slick("slickGoTo",0)}),a()}),s.on("afterChange",function(e,t,r){a()});var e=wp.template("reyArrowSvg"),t=e({direction:"left"}),r={slidesToShow:1,rows:0,adaptiveHeight:!0,fade:!0,swipe:!0,arrows:!0,dots:!0,autoplaySpeed:1600,dotsClass:"rey-productSlideshow-dots",customPaging:function(e,t){return'<span data-index="'+t+'"></span>'},nextArrow:e({direction:"right"}),prevArrow:t,responsive:[{breakpoint:767,settings:{dots:!1,arrows:!1,autoplay:!1}}]};"arrows"===reyParams.js_params.product_item_slideshow_nav&&(r.dots=!1),"dots"===reyParams.js_params.product_item_slideshow_nav&&(r.arrows=!1),s.slick(r)})}}),h(document).on("rey/view_selector/change_cols",function(e,t){h(".rey-productSlideshow.slick-initialized",t).each(function(e,t){h(t).slick("refresh")})})},this.productsGrids=function(){var r=this;h(".rey-siteMain ul.products").each(function(e,t){r.productsGrid.init(t,r)})},this.productsGrid={gridTypes:["default","masonry","masonry2","metro","scattered","scattered2"],init:function(e,t){var r=this;this.$pGrid=h(e),0!==this.$pGrid.length&&h.each(this.gridTypes,function(e,t){r.$pGrid.hasClass("rey-wcGrid-"+t)&&void 0!==r["run_"+t]&&r["run_"+t]()})},run_masonry:function(){var s=this;this.doMasonryGrid(),h(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){s.doMasonryGrid(h("ul.products",t))})},run_masonry2:function(){var s=this;this.doMasonryGrid(),h(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){s.doMasonryGrid(h("ul.products",t))})},doMasonryGrid:function(e){var t=e||this.$pGrid,r=!1;t.hasClass("--prevent-masonry")||void 0===h.fn.masonry&&void 0===h.fn.imagesLoaded||(t.imagesLoaded(function(){r||((r=t.masonry({itemSelector:"li.product",percentPosition:!0,transitionDuration:0,isInitLayout:!1})).on("layoutComplete",function(){r.addClass("--msnry-initialised")}),r.masonry())}),h(document).on("rey/refresh_html",function(e,t){t.imagesLoaded(function(){r&&r.masonry("appended",t)})}),h(document).on("rey/view_selector/change_cols",function(e){r&&r.masonry()}))},run_scattered:function(){this.doScattered()},run_scattered2:function(){this.doScattered("mixed")},doScattered:function(t){var r=this;if(!this.$pGrid.hasClass("--prevent-scattered")){this.$products=h("li.product",this.$pGrid);var s=function(e){"mixed"!==t?e.addClass("scGrid-offset"):e.addClass("scGrid-offset-"+h.reyHelpers.getRandomInt(8))};if(reyParams.js_params.scattered_grid_custom_items&&reyParams.js_params.scattered_grid_custom_items.length)h.each(reyParams.js_params.scattered_grid_custom_items,function(e,t){s(h("li.product.post-"+t,r.$pGrid))});else{var e=reyParams.js_params.scattered_grid_max_items||7;this.$products.sort(function(){return.5-Math.random()}).slice(0,e).each(function(e,t){s(h(t))})}}},run_metro:function(){"string"==typeof document.createElement("div").style.grid||(this.$pGrid.addClass("--no-css-grid"),this.doMasonryGrid(),h(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){self.doMasonryGrid(h("ul.products",t))}))}},this.ajaxSearch={class:"is-opened",term:"",$searchPanel:h(".js-rey-ajaxSearch"),_request:!1,init:function(){h.reyHelpers.params.ajax_search&&(this.$postType=h('[name="post_type"]',this.$searchPanel),this.$postType.length&&(this.$searchField=h("input[type='search']",this.$searchPanel),this.panel_HTML=wp.template("reySearchPanel"),this.$results=h(".js-rey-searchResults",this.$searchPanel),this.params=h.reyHelpers.params,this.events()))},events:function(){var t=this;this.$searchField.on("search keyup change paste",h.reyHelpers.debounce(function(){var e=h(this).val();""!==e&&e.length>=t.params.js_params.ajax_search_letter_count?""!=t.term&&t.term==e||(t._request&&t._request.abort(),t.$searchPanel.addClass("--loading"),t.doSearch(e)):t.printSearchResults(),t.term=e},1e3)),this.$postType.on("change",function(e){t.term="",t.$searchField.trigger("search"),h(".rey-searchForm-postType > span",t.$searchPanel).text(h("option:selected",this).text())}),h(".rey-searchPanel__suggestions button").on("click",function(e){e.preventDefault(),t.$searchField.val(h(this).text()),t.$searchField.trigger("change")})},doSearch:function(e){var s=this;void 0!==this.params.rest_url&&void 0!==this.params.rest_search_url&&void 0!==this.params.rest_nonce&&void 0!==this.params.search_texts&&(this._request=h.ajax({url:this.params.rest_url+this.params.rest_search_url,cache:!1,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",s.params.rest_nonce)},data:{s:e,post_type:s.$postType.val()},success:function(e){var t=[];e&&e.success&&0!==parseInt(e.total_items)&&(t=e.data.items),s.$searchPanel.addClass("--has-results"),s.printSearchResults(t),s._request=!1},error:function(e,t,r){console.error(e),console.error(t),console.error(r),s._request=!1}}))},printSearchResults:function(e){var t="";h.reyHelpers.isArray(e)?(t=e.length?this.panel_HTML({items:e,only_title:this.params.ajax_search_only_title}):"<div class='rey-searchResults-message'>"+this.params.search_texts.NO_RESULTS+"</div>",this.$searchPanel.removeClass("--loading")):this.$searchPanel.removeClass("--has-results");var r=this.$results.empty().removeClass("--visible").html(t);h(r).imagesLoaded(function(){h(r).addClass("--visible")})}},this.miniCart={scrollContainer:".woocommerce.rey-cartPanel .woocommerce-mini-cart",$reyTheme:h.reyTheme,$cartOpenBtn:h(".js-rey-headerCart"),$cartPanel:h(".js-rey-cartPanel"),init:function(e){this.$app=e,this.$cartOpenBtn.length&&(this.events(),this.refreshScroll())},refreshScroll:function(){var e=h(this.scrollContainer);e.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(e[0])},events:function(){var i=this;this.$cartOpenBtn.on("click",function(e){e.preventDefault(),h(this).hasClass("--cart-checkout")?window.location.href=h(this).attr("data-href"):h.reyHelpers.is_global_section_mode||h("body.woocommerce-cart.woocommerce-page").length||h("body.woocommerce-checkout.woocommerce-page").length||i.open()}),this.$cartPanel.on("change","input.qty",function(e){var t=h(this),r=t.closest(".woocommerce-mini-cart-item"),s=h("a.remove",r);e.preventDefault(),r.addClass("--loading"),h.ajax({type:"POST",url:h.reyHelpers.params.ajaxurl,data:{action:"rey_update_minicart",cart_item_key:s.data("cart_item_key"),cart_item_qty:t.val(),security:h.reyHelpers.params.ajax_nonce},success:function(e){e&&e.fragments?(h.each(e.fragments,function(e){h(e).fadeTo("400","0.6").addClass("--no-click")}),h.each(e.fragments,function(e,t){h(e).replaceWith(t),h(e).stop(!0).css("opacity","1").removeClass("--no-click")}),h(document.body).trigger("wc_fragments_loaded")):window.location=s.attr("href")},error:function(){h("<p><small>"+h.reyHelpers.params.cannot_update_cart+"</small></p>").appendTo(r),setTimeout(function(){window.location.reload()},1e3)},dataType:"json"})}),h(document).on("click",".woocommerce-mini-cart-item a.remove",function(e){h(this).closest(".woocommerce-mini-cart-item").addClass("--loading")}),h(document.body).on("added_to_cart",function(e,t,r,s){if("yes"!==wc_add_to_cart_params.cart_redirect_after_add){if(s.is("[data-checkout]"))return h(document).off("reycore/minicart/open"),void(window.location=h.reyHelpers.params.checkout_url);if(!s.hasClass("--prevent-open-cart")&&"cart"===h.reyHelpers.params.after_add_to_cart)if(h("body").hasClass("woocommerce-cart")){var a=h(".woocommerce-cart-form");a.length&&h("html,body").animate({scrollTop:a.offset().top},"slow")}else i.open()}}),h(document.body).on("added_to_cart removed_from_cart wc_fragments_refreshed updated_wc_div wc_fragments_loaded ",function(e){i.refreshScroll(),i.$app.quantityButtonControls(i.$cartPanel)}),h(document.body).on("wc_cart_button_updated",function(e,t){t.next(".added_to_cart").remove()}),h(document).on("reycore/minicart/open",function(e){i.open()})},open:function(){h(document).trigger("rey/close_panels",["mini-cart"]),h.reyHelpers.overlay("site","open"),h.reyHelpers.doScroll.disable(),this.$cartPanel.show(0,function(){h("body").addClass("--cart-active --side-panel-active")})},close:function(){var e=this;h("body").removeClass("--cart-active --side-panel-active"),h.reyHelpers.overlay("site","close"),h.reyHelpers.doScroll.enable(),setTimeout(function(){e.$cartPanel.hide(0)},500)}},this.viewSelectorColumns=function(t){t=t||h(document);var r={init:function(e){this.$products=h(e,t),this.$viewSelector=h(".rey-viewSelector",this.$products.prev(".rey-loopHeader")),this.$gridElement=this.$products.closest(".elementor-widget-reycore-product-grid"),this.$eProGridElement=this.$products.closest(".elementor-products-grid"),this.$products.length&&this.$viewSelector.length&&(this.$viewSelectorsChildren=h("li",this.$viewSelector),this.elementId=this.$gridElement.length?this.$gridElement.attr("data-id"):"",this.lsName="rey-active-view-selector-"+h.reyHelpers.params.site_id+this.elementId,this.cols=localStorage.getItem(this.lsName),this.changeCols(),this.events())},changeCols:function(){!this.cols&&this.$viewSelectorsChildren.length&&(this.cols=this.$viewSelectorsChildren.filter(".is-active").attr("data-count")||parseFloat(h.reyHelpers.params.catalog_cols||4),h("body.customizer-preview-mode").length||localStorage.setItem(this.lsName,this.cols)),this.$viewSelector.hasClass("--is-visible")||this.$viewSelector.addClass("--is-visible"),this.$products.hasClass("--is-visible")||this.$products.addClass("--is-visible"),this.$viewSelectorsChildren.removeClass("is-active").filter('[data-count="'+this.cols+'"]').addClass("is-active"),this.$products.removeClass(function(e,t){return(t.match(/(^|\s)columns-\d+/g)||[]).join(" ")}).addClass("columns-"+this.cols).attr("data-cols",this.cols),this.$products.hasClass("rey-wcGrid-metro")&&h.reyHelpers.is_desktop&&h.reyHelpers.setProperty("--woocommerce-grid-columns",this.cols,this.$products[0]),this.$eProGridElement.length&&this.$products.closest(".woocommerce").removeClass(function(e,t){return(t.match(/(^|\s)columns-\d+/g)||[]).join(" ")}).addClass("columns-"+this.cols)},events:function(){var r=this;this.$viewSelectorsChildren.on("click",function(e){var t=h(e.currentTarget).attr("data-count")||3;localStorage.setItem(r.lsName,t),r.cols=t,r.changeCols(),h(document).trigger("rey/view_selector/change_cols",[r.$products])})}};h(".woocommerce ul.products:not(.--prevent-change-cols)").each(function(e,t){Object.create(r).init(t)})},this.wcFilterPanel={class:"--filter-panel-active --side-panel-active",$filter_panel:h("#js-filterPanel"),open:function(){var e=this;this.$filter_panel.show(0,function(){h("body").addClass(e.class),h.reyHelpers.doScroll.disable()}),h(document).trigger("reycore/woocommerce/filter_panel/open")},close:function(){var e=this;h("body").removeClass(this.class),setTimeout(function(){e.$filter_panel.hide(0)},500)}},this.wcFilterSidebar={class:"--side-panel-active",sidebar_class:"--active",$sidebar:h("aside.rey-filterSidebar, .rey-siteMain.rey-filterSidebar .elementor-widget-sidebar, .rey-siteContent > .elementor .elementor-element.elementor-widget-sidebar.rey-filterSidebar"),addCloseButton:function(){var e="";void 0!==h.reyCore.addSvgIcon&&(e=h.reyCore.addSvgIcon("rey-icon-close")),h('<button class="rey-sidePanel-close js-rey-sidePanel-close">'+e+"</button>").appendTo(this.$sidebar.children()).on("click",function(e){e.preventDefault(),h(document).trigger("rey/close_panels")})},open:function(){h("body").addClass(this.class),this.$sidebar.addClass(this.sidebar_class)},close:function(){h("body").removeClass(this.class),this.$sidebar.removeClass(this.sidebar_class)}},this.accountPanel={$btn:h(".js-rey-headerAccount"),$panel:h(".js-rey-accountPanel"),$reyTheme:h.reyTheme,panel_alignment:"right",isOpen:!1,$buttonInUse:!1,init:function(e){this.$app=e,this.$panel&&this.events()},events:function(){var r=this;this.$btn.on("click",function(e){e.preventDefault();var t=h(this);h.reyHelpers.is_global_section_mode||(r.$buttonInUse=t,r.isOpen?r.close():r.open())}),h(".rey-form-row.rey-form-row--text").on("change keyup paste",".rey-input",function(e){var t=h(this);""!==t.val()?t.parent().addClass("--has-value"):t.parent().removeClass("--has-value")}),h(".rey-accountPanel-links .btn").on("click",function(e){var t=h(this).attr("data-location")||"";t&&(e.preventDefault(),r.switchForm(t))}),h(document).on("scroll",function(){r.isOpen&&h.reyHelpers.is_desktop&&r.close()})},switchForm:function(e){var t=this.$panel.find(".rey-accountForms");t.addClass("--loading"),setTimeout(function(){t.find(".--active").removeClass("--active"),h("."+e).addClass("--active"),t.removeClass("--loading")},1e3)},open:function(){var e=this;this.isOpen=!0,h(document).trigger("rey/close_panels",["account-panel"]),h.reyHelpers.overlay("header","open"),void 0===h.reyHelpers.params.account_panel_custom_position&&this.doPosition(),this.$panel.show(0,function(){e.$reyTheme.elements.$body.addClass("header-account--active"),h(document).trigger("rey/account_panel/open",[e,this]),e.$app.wishlist.refresh()})},close:function(){var e=this;this.isOpen=!1,this.$panel.length&&(e.$reyTheme.elements.$body.removeClass("header-account--active"),h.reyHelpers.overlay("header","close"),setTimeout(function(){e.$panel.hide(0)},600))},doPosition:function(){var i=this,o=this.$buttonInUse,e=function(){if(!1!==o){var e=o[0].getBoundingClientRect(),t=h(window).width(),r=e.top+o.height(),s=e.left,a=t-(e.left+o.width());i.$panel.css("top",r+"px"),h.reyHelpers.is_mobile?i.$panel.css({left:"",right:""}):s<t/2?i.$panel.addClass("--from-left").css({left:s+"px",right:""}):i.$panel.addClass("--from-right").css({right:a+"px",left:""})}};e(),h(window).on("resize",h.reyHelpers.debounce(e,500))}},this.wishlist={wishlist_panel:h("#js-wishlist-panel"),has_content:!1,init:function(){this.wishlist_panel.length&&(this.params=h.reyHelpers.params,this.wishlist_container=this.wishlist_panel.parent(),this.events())},events:function(){var e=this;h(document).on("wc_fragments_loaded.wishlist wc_fragments_refreshed.wishlist",function(){e.has_content=!1,e.wishlist_container.removeClass("--loaded")})},refresh:function(){var t=this;this.wishlist_panel.length&&!t.has_content&&this.params.ajaxurl&&this.params.ajax_nonce&&(this.wishlist_panel.addClass("--loading").empty(),h.ajax({url:this.params.ajaxurl,dataType:"html",cache:!1,data:{action:"get_wishlist_data",security:h.reyHelpers.params.ajax_nonce},success:function(e){var s=[];0<h(e).find(".wishlist_item").length?(h(e).find(".wishlist_item").each(function(e,t){var r=h(t);s[e]={name:r.find(".product-name").html(),img:r.find(".product-thumbnail").html(),price:r.find(".product-price").html()}}),t.display(s),t.has_content=!0):t.show_empty(),t.wishlist_panel.removeClass("--loading")},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}}))},refreshScroll:function(){var e=this.wishlist_panel;"undefined"!=typeof SimpleScrollbar&&e.length&&SimpleScrollbar.initEl(e[0])},display:function(t){var r=this;if(0<t.length){this.wishlist_container.removeClass("--empty"),2<=t.length?this.wishlist_container.addClass("--is-large"):this.wishlist_container.removeClass("--is-large");var e=wp.template("reyWishlistItem")({num:t.length,ob:t});h(e).appendTo(r.wishlist_panel),setTimeout(function(){var e=Math.max(h(".rey-wishlistItem",r.wishlist_panel).eq(0).height(),300);r.wishlist_container.hasClass("--is-large")&&(e=Math.max(h(".rey-wishlistItem",r.wishlist_panel).eq(0).height(),h(".rey-wishlistItem",r.wishlist_panel).eq(1).height(),300)),r.wishlist_container.addClass("--loaded").css("height",e+"px"),2<t.length&&r.refreshScroll()},500)}},show_empty:function(){this.wishlist_container.addClass("--empty"),this.params.empty_text&&h("<p>"+this.params.empty_text+"</p>").appendTo(this.wishlist_panel)}},this.quickview={pid:!1,init:function(e){this.$app=e,this.$reyTheme=h.reyTheme,this._panel="#js-rey-quickviewPanel",this.$panel=h(this._panel),this.$panelContainer=h(".rey-quickview-container",this.$panel),this.$panel.length&&this.events()},events:function(){var a=this,e=function(e){if(h.reyHelpers.is_desktop){e.preventDefault();var t=h(this).closest(".rey-productInner").attr("data-id");t&&(h.reyHelpers.overlay("site","open"),a.open(t))}};h(document).on("click",".js-rey-quickviewBtn",e),h.reyHelpers.params.quickview_only&&(h(document).on("click","li.product .woocommerce-loop-product__link",e),h(document).on("click","li.product .woocommerce-loop-product__title a",e)),this.$panel.on("click",".rey-postNav .nav-links > div > a",function(e){e.preventDefault();var t=h(this).children(".rey-productNav__meta").attr("data-id");t&&a.open(t)}),this.$panel.on("click",".js-rey-quickviewPanel-close",function(e){e.preventDefault(),a.close()}),h(document).on("keyup",function(e){27==e.keyCode&&a.close()}),this.$reyTheme.elements.$site_overlay.on("click",function(){a.close()}),h(document).on("reycore/after_quickview_effect",function(e,t){var r=h(t),s=a.$panel.find(".js-scrollbar");s.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(s[0]),a.$app.startVariationForms(r)}),h(document).on("reycore/after_quickview",function(e,t){var r=h(t);h(".woocommerce-product-gallery",r).removeClass("woocommerce-product-gallery--vertical"),a.$panel.addClass("--is-visible").removeClass("--is-loading"),a.$app.quantityButtonControls(r),void 0!==h.reyTheme&&h.reyTheme.general_html(r);var s={easing:"easeInOutQuart",duration:400,complete:function(){h(document).trigger("reycore/after_quickview_effect",[r])}};if(a.$panelContainer.hasClass("--curtain"))anime.timeline(s).add({targets:a._panel+" .rey-quickview-container",scaleX:[0,1]}).add({targets:a._panel+" .rey-quickview-mask",scaleX:[1,0],delay:function(e,t){return 250*t}}).add({targets:a._panel+" .rey-productSummary",scale:[1.1,1]},"-=400");else if(a.$panelContainer.hasClass("--slide")){s.duration="600",s.easing="easeOutQuart",anime.timeline(s).add({targets:a._panel+" .rey-quickview-container",translateY:[150,0],scale:[.95,1],opacity:[0,1]})}a.$app.customizeAtcButton(r)})},open:function(e){var r=this;void 0!==h.reyHelpers.params.ajaxurl&&void 0!==e&&""!=e?(this.pid=e,this.$panel.addClass("--is-loading"),this.$reyTheme.elements.$body.addClass("quickview--is-opened"),""!=h.trim(this.$panelContainer.html())&&this.cleanupPanel(),h(document).trigger("reycore/before_quickview",[e]),h.ajax({method:"post",url:h.reyHelpers.params.ajaxurl,data:{action:"get_quickview_product",id:e},success:function(e){if(!e||e&&!e.success)console.warn(e.data);else{var t=r.$panelContainer.html(e.data);h(document).trigger("reycore/after_quickview",[t])}},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}})):this.close()},close:function(){h.reyHelpers.overlay("site","close"),this.$reyTheme.elements.$body.removeClass("quickview--is-opened"),this.$panel.length&&(this.$panel.removeClass("--is-visible --is-loading"),this.cleanupPanel())},cleanupPanel:function(){this.$panelContainer.fadeOut("fast",function(){h(this).attr("style","").children().remove()})}},this.activeFilterCount=function(e){var t=0,r=h(e).find(".rey-filterBtn__count");r.length&&(t=r.attr("data-count")),h("body").attr("data-active-filters",t)},this.overrideSelect2Defaults=function(){void 0!==h.fn.select2&&(h.fn.select2.defaults.set("containerCssClass","select2-reyStyles"),h.fn.select2.defaults.set("dropdownCssClass","select2-reyStyles"))},this.productVariations=function(e){var r=function(e){this.$variation=h(e),this.init=function(){this.type=this.$variation.attr("data-attribute-type"),this.variationsData=JSON.parse(this.$variation.attr("data-product_variations")),this.attributeName=this.$variation.attr("data-attribute-name"),this.events(),this.findDisableds()},this.events=function(){var s=this;"select"!==this.type?this.$variation.on("click","li",function(e){e.preventDefault();var t=h(e.currentTarget),r=t.children().attr("data-slug");t.siblings().removeClass("--active"),t.addClass("--active"),s.doChanges(r)}):this.$variation.on("change","select",function(e){e.preventDefault();var t=h(e.currentTarget).val();s.doChanges(t)})},this.doChanges=function(e){var t=this.matchVariation(e);t&&(this.changePrice(t),this.changeThumb(t))},this.findDisableds=function(){var a=this;h.each(this.variationsData,function(e,t){if("variation_is_visible"in t&&!1===t.variation_is_visible&&"attributes"in t&&a.attributeName in t.attributes){var r="--disabled";!0===t.hidden&&(r="--hidden");var s=t.attributes[a.attributeName];a.$variation.find('li span[data-slug="'+s+'"]').parent().addClass(r)}})},this.matchVariation=function(r){var s=this,a=!1;return h.each(this.variationsData,function(e,t){"attributes"in t&&s.attributeName in t.attributes&&t.attributes[s.attributeName]===r&&(a=t)}),a},this.changePrice=function(e){if("price_html"in e&&""!==e.price_html){var t=this.$variation.closest("li.product").find(".price");t.length&&t.replaceWith(e.price_html)}},this.changeThumb=function(e){if("image_src"in e&&"object"==typeof e.image_src){var t=this.$variation.closest("li.product").find(".rey-productThumbnail img:first-of-type");if(t.length){var r=t.attr("src");if(r===e.image_src[0])return;var s=t.attr("srcset")||"";s=s.replace(r,e.image_src[0]);var a=t.attr({src:e.image_src[0],srcset:s}).css("opacity",.2),i=t.parent();t.remove(),a.prependTo(i).on("load",function(){h(this).css({opacity:1,"transition-duration":"700ms"}).nextAll("img").remove()})}}},this.init()};h(".rey-productVariations",h(e||document)).each(function(e,t){new r(t)})},this.fixedSummary=function(){if(h.reyHelpers.params.fixed_summary&&h.reyHelpers.is_desktop){var t=h(".--fixed-summary .rey-productSummary"),r=h(".summary.entry-summary",t),s=h(".rey-siteHeader.header-pos--fixed"),a=h.reyHelpers.params.fixed_summary__offset;if(t.length&&r.length){r.wrapInner('<div class="__fixed-wrapper"/>');var i=h(".__fixed-wrapper");if(void 0!==h.reyHelpers.applyFilter)h.reyHelpers.applyFilter("reycore/woocommerce/fixed_summary/animate",!1)&&i.addClass("--animated");s.length||i.addClass("--absolute-header");var o,n,c,l,d,u=h.reyHelpers.adminBar,p=function(e,t){i.removeClass("--sticked").addClass("--absolute-header").css({top:e-(t+40)+"px"})},e=function(){var e=window.pageYOffset||document.documentElement.scrollTop;c=t.height(),l=i.height(),d=i.offset().top,s.length?(n=0,u=""!==a?parseInt(a):parseInt(r.css("padding-top")||0),u+=h.reyHelpers.adminBar):(a=""!==a?parseInt(a):80,n=d-a,u=a+h.reyHelpers.adminBar),!o&&c<e&&p(c,l)};t.imagesLoaded(function(){e()}),t.on("lazyloaded",function(){e()}),h(window).on("resize",h.reyHelpers.debounce(e,500)),h(window).on("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=c<e+l+u;if(n<e&&!t){if(!o){var r={top:u+"px"};i.removeClass("--absolute-header").addClass("--sticked").css(r),o=!0}}else t?o&&(p(c,l),o=!1):o&&(i.removeClass("--sticked").css({top:""}),o=!1)}).trigger("scroll")}}},this.requestQuote={init:function(){this.$modal=h(".rey-requestQuote-modal"),this.$modalForm=h("form",this.$modal),this.$modalForm.length&&(this.$hiddenId=h('<input type="hidden" name="rey-request-quote-product-id" />').appendTo(this.$modalForm),this.assignId(),this.events())},events:function(){var a=this;h(document).on("click",".js-requestQuote",function(e){e.preventDefault();var t=h(this),r=t.attr("data-id")||0,s=t.closest(".rey-quickviewPanel");s.length&&(r=h("div.product",s).attr("data-id")||0)&&a.assignId(r),h.reyCore.reyModal.init({width:550,content:h(".rey-requestQuote-modal"),wrapperClass:"rey-requestQuote-modalWrapper",zIndex:1060,id:"rq-"+r})}),h(document).on("woocommerce_variation_has_changed",".variations_form",function(e){e.stopImmediatePropagation();var t=h(e.target).find('input[type="hidden"][name="variation_id"]').val();t&&a.assignId(t)})},assignId:function(e){e=e||this.$modal.attr("data-id"),this.$hiddenId.val(e)}},this.AjaxAddToCartProductPage=function(){h.reyHelpers.params.single_ajax_add_to_cart&&h(document).on("submit","form.cart",function(e){var s=h(this),a=h(".single_add_to_cart_button:not(.disabled)",s);if(!a.parents("div.product").hasClass("product-type-external"))if(e.preventDefault(),void 0!==h.reyHelpers.params.ajaxurl&&void 0!==h.reyHelpers.params.ajax_nonce){var t=s.serialize()||"";t+="&action=reycore_ajax_add_to_cart",a.val()&&(t+="&add-to-cart="+a.val()),void 0!==h.reyHelpers.applyFilter&&(t=h.reyHelpers.applyFilter("reycore/woocommerce/addtocart_data",t)),h(document.body).trigger("adding_to_cart",[a,t]),h.ajax({type:"POST",url:h.reyHelpers.params.ajaxurl,data:t,beforeSend:function(e){h(".woocommerce-error",s).remove(),a.removeClass("added").addClass("loading")},success:function(e){if(e)if(void 0===e.success||!1!==e.success){var t=window.location.toString();if(t=t.replace("add-to-cart","added-to-cart"),e.error&&e.product_url)window.location=e.product_url;else if("yes"!==wc_add_to_cart_params.cart_redirect_after_add)if("checkout"!==h.reyHelpers.params.after_add_to_cart){a.removeClass("loading");var r=e.fragments;r&&h.each(r,function(e){h(e).addClass("updating")}),r&&h.each(r,function(e,t){h(e).replaceWith(t)}),void 0!==e.notices&&""!==e.notices&&0<e.notices.indexOf("error")?(s.prepend(e.notices),a.addClass("not-added")):(a.addClass("added"),h(document.body).trigger("added_to_cart",[r,e.cart_hash,a]))}else window.location=h.reyHelpers.params.checkout_url;else window.location=wc_add_to_cart_params.cart_url}else console.warn(e.data)},error:function(){console.warn("Ajax add to cart error!")}})}else console.warn("Ajax url undefined")})},this.equalizeProductItems=function(e){var t=h.reyHelpers.params.js_params.equalize_product_items;if(void 0!==t&&t.length)for(var r=h("ul.products"),s=e||h("li.product",r),a=parseInt(r.attr("data-cols")),n=[],c=0;c<s.length;c+=a){n[c]={};var l=s.slice(c,c+a);h.each(t,function(e,o){l.each(function(a,i){var e=h(o,h(i));n[c][a]={},n[c][a][o]={},n[c][a][o].element=e,n[c][a][o].value=e.height(),n[c][a][o].class=e.attr("class"),n[c][a][o].before=e.prev().attr("class"),void 0!==n[c][a-1]&&(n[c][a-1][o].value>=n[c][a][o].value&&(n[c][a][o].value=n[c][a-1][o].value),""!==n[c][a-1][o].class&&(n[c][a][o].class=n[c][a-1][o].class),""!==n[c][a-1][o].before&&(n[c][a][o].before=n[c][a-1][o].before)),l.length-1===a&&h.each(n[c],function(e,t){var r=n[c][a][o].value;if(t[o].element.length)t[o].element.css("min-height",r);else{var s=h("."+n[c][a][o].before,h(i));h('<div class="'+n[c][a][o].class+'" style="min-height:'+r+'px" />').insertAfter(s)}})})})}},this.quantityButtonControls=function(e){e=e||h(document),h(document).on("focus",".rey-cartBtnQty input.--select-text",function(e){var t=e.currentTarget;t.type="text",t.setSelectionRange(0,t.value.length),h(t).hasClass("--prevent-focus")||(t.type="number")}),h('.rey-qtySelect ~ input[name="quantity"]').remove();var t=h(".rey-qtyField.cartBtnQty-controls",e);if(t.length){h("input",t).addClass("--prevent-focus").attr("type","text");h(".cartBtnQty-control").off("click").on("click",function(e){e.preventDefault();var t=h(this),r=t.nextAll("input"),s=parseFloat(r.val()),a=parseFloat(r.attr("min")||1),i=parseFloat(r.attr("max")||99999),o=parseFloat(r.attr("step")||1);t.hasClass("--disabled")||(t.parent().find(".cartBtnQty-control").removeClass("--disabled"),t.hasClass("--minus")?a<s?s-=o:t.addClass("--disabled"):t.hasClass("--plus")&&(s+o==i&&t.addClass("--disabled"),s<i&&(s+=o)),s%1&&(s=s.toFixed(2)),r.val(s).trigger("change"))})}},this.variableProductAddToCart=function(e,t){if(e=e||h(document),h.reyHelpers.is_desktop&&h.reyHelpers.params.loop_ajax_variable_products){t&&h(".rey-productLoop-variationsForm").remove();var n=this;h(".product_type_variable.add_to_cart_button",e).on("click",function(e){e.preventDefault(),h(document).trigger("rey/close_panels",["productLoop-variationsForm"]),h.reyHelpers.overlay("site","open");var r=h(this),s=r.closest("li.product"),t=r.attr("data-product_id")||"",i=r.offset();s.addClass("--hover");var a=h('.rey-productLoop-variationsForm[data-id="'+t+'"]'),o=s.width();o<300&&(o=300),a.length?a.css({left:i.left,top:i.top,width:o}).addClass("--visible"):(r.addClass("--loading"),h.ajax({url:h.reyHelpers.params.ajaxurl,data:{action:"reycore_loop_variable_product_add_to_cart",product_id:t},success:function(e){if(e)if(e.success){var t=h(e.data).appendTo(document.body);n.startVariationForms(t),n.quantityButtonControls(t),t.css({left:i.left,top:i.top,width:o}).addClass("--visible"),r.removeClass("--loading");var a=function(){t.removeClass("--visible").css({left:"",top:""}),s.removeClass("--hover"),""==h.reyHelpers.params.after_add_to_cart&&h.reyHelpers.overlay("site","close")};h(".rey-productLoop-variationsForm-close",t).on("click",function(e){e.preventDefault(),a()}),h(document).on("keyup",function(e){27==e.keyCode&&t.hasClass("--visible")&&a()}),h(document.body).on("added_to_cart",function(e,t,r,s){a()}),h(".variations_form",t).addClass("--prevent-scroll-to-gallery")}else console.warn(e.data)}}))}),h(document).on("rey/close_panels",function(e,t){"productLoop-variationsForm"!==t&&(h(".rey-productLoop-variationsForm").removeClass("--visible").css({left:"",top:""}),h("li.product.--hover").removeClass("--hover"))})}},this.productsCarousels=function(p){if(p=p||h(document),void 0!==h.reyHelpers.applyFilter){var e=h.reyHelpers.applyFilter("reycore/productcarousels",[{selector:".cart-collaterals .cross-sells ul.products",slidesToShow:2,slidesToScroll:2,autoplay:!0,autoplaySpeed:6e3}]);h.each(e,function(e,t){var r=h(t.selector,p),s=(r.parent().addClass("rey-productCarousel-wrapper"),h("li.product",r));if(!(s.length<t.slidesToShow)){h.each({"rey-wcGap-":"rey-wcGap-default","rey-wcGap-":"rey-wcGrid-default","columns-":"","":"--prevent-change-cols --prevent-thumbnail-sliders rey-productCarousel"},function(s,e){s&&r.removeClass(function(e,t){var r="\\S*"+s+"\\S*";return(t.match(new RegExp(r,"g"))||[]).join(" ")}),e&&r.addClass(e)}),s.removeClass("is-animated-entry is-animated");var a=wp.template("reyArrowSvg"),i=a({direction:"left"}),o=a({direction:"right"}),n=h('<div class="rey-productCarousel-nav"><span class="rey-productCarousel-navCurrent"></span><span class="rey-productCarousel-navSep">&mdash;</span><span class="rey-productCarousel-navTotal"></span></div>');n.insertAfter(r);var c=h(".rey-productCarousel-navCurrent",n),l=h(".rey-productCarousel-navTotal",n),d=function(e){return(e<10?"0":"")+e};r.on("init",function(e,t){c.text(d(t.currentSlide+1)),l.text(d(t.slideCount))}).on("beforeChange",function(e,t,r,s){c.text(d(s+1))});var u=h.extend({slidesToShow:4,slidesToScroll:1,swipe:!0,infinite:!0,speed:300,arrows:!0,nextArrow:o,prevArrow:i,appendArrows:n},t);r.slick(u)}})}},this.customizeAtcButton=function(e){e=e||h(document),h("button.single_add_to_cart_button",e).each(function(){var e=h(this),t=e.text();h(".single_add_to_cart_button-text",e).length||e.html('<span class="single_add_to_cart_button-text">'+t+'</span><span class="rey-lineLoader"></span>')})},this.wcAccountForms=function(){var e=[{type:"login",scope:h("form.js-rey-woocommerce-form-login"),replace:".rey-accountPanel .woocommerce-MyAccount-navigation-wrapper"},{type:"forgot",scope:h("form.js-rey-woocommerce-form-forgot"),replace:".rey-pageContent > .woocommerce"},{type:"register",scope:h("form.js-rey-woocommerce-form-register"),replace:".rey-accountPanel .woocommerce-MyAccount-navigation-wrapper"}];h.each(e,function(e,a){var r=a.scope,i=r.closest(".rey-accountForms"),t=h(".rey-accountForms-notice",r);if(!i.is("[data-no-ajax]")){var o={class:"--filled",add:function(e){t.length&&t.html(e).addClass(this.class)},remove:function(){t.length&&t.html("").removeClass(this.class)}};r.on("submit",function(e){e.preventDefault(),i.addClass("--loading"),o.remove();var t=r.serialize()||"";t+="&action=reycore_account_forms",t+="&action_type="+a.type,"login"===a.type?t+="&login="+h('button[name="login"]',r).val():"register"===a.type&&(t+="&register="+h('button[name="register"]',r).val()),h.post({url:h.reyHelpers.params.ajaxurl,data:t,success:function(e){if("string"==typeof e&&""!==e){var t=i.attr("data-redirect-type")||"load_menu",r=i.attr("data-redirect-url");if("load_menu"!==t)return void("refresh"!==t||r?window.location.href=r:window.location.reload());var s=h(a.replace,e);return s.hasOwnProperty("length")&&s.length&&i.wrap('<div class="rey-accountForms-response --'+a.type+'"></div>').replaceWith(s),void i.removeClass("--loading")}"object"==typeof e&&e.success&&e.data&&e.data.notices&&""===e.data.notices&&setTimeout(function(){h.get(window.location.href,onSuccess)},1e3),!e||e&&!e.data?console.warn("Something wrong with the Ajax request response."):(i.removeClass("--loading"),e.success?e.data.notices&&o.add(e.data.notices):o.add(e.data))},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}})})}})},this.startVariationForms=function(e){h(".variations_form",e).each(function(){h(this).wc_variation_form()})},this.productPageMobileTabs=function(){var e=h("div.product .wc-tabs-wrapper");if(e.length){var s=h("ul.wc-tabs",e),a=h(".woocommerce-Tabs-panel",e);a.each(function(t,e){h(e);var r=s.children("li").eq(t);h("<div />").html(r.html()).attr({class:r.attr("class"),id:r.attr("id"),role:r.attr("role"),"aria-controls":r.attr("aria-controls")}).insertBefore(e).addClass("rey-wcTab-mobile").on("click",function(e){e.preventDefault(),h(".rey-wcTab-mobile").removeClass("--active").removeClass("active"),h(this).addClass("--active"),a.hide(),a.eq(t).show()})})}},this.refreshProductCountAjaxLoad=function(e){var t=h(".woocommerce-result-count");if(h(".rey-ajaxLoadMore").length&&t.length){var r=t.text(),s=t.html(r.replace(/(\d+–\d+)/gi,"<span class='total-count'>$1</span>")),a=h(".total-count",s),i=a.text().split("–");void 0!==e&&2===i.length&&(i[1]=e.length+parseInt(i[1]),a.text(i.join("–")))}},this.init()};h(document).on("reytheme/before_init",function(){h('.rey-wcPanel--description iframe[src*="youtu"], .woocommerce-Tabs-panel--description iframe[src*="youtu"]').wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),h(".woocommerce ul.products li.product .price .rey-discount").each(function(){h(this).clone().addClass("--mobile").appendTo(h(this).closest(".rey-productInner"))})}),h(document).ready(function(){h.reyThemeWooCommerce=new e})}(jQuery);
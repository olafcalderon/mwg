!function(n,e,i){"use strict";var t,a={init:function(){a.loadSizeChartMenuScript(),a.loadChartCategorySelect2(),a.loadProductChartSelect2(),a.loadColorPicker(),a.loadPreviewSizeChart(),a.loadSizeChartProductMetaColumn(),a.loadSizeChartProductMetaAjax(),a.deleteSizeChartImage(),a.closeSizeChartModal(),a.requiredSizeChartTitle()},loadSizeChartMenuScript:function(){var e=n("#toplevel_page_dots_store");"admin_page_size-chart-setting-page"!==sizeChartScriptObject.size_chart_current_screen_id&&"dotstore-plugins_page_size-chart-information"!==sizeChartScriptObject.size_chart_current_screen_id||(e.addClass("wp-has-current-submenu wp-menu-open menu-top menu-top-first").removeClass("wp-not-current-submenu"),n("#toplevel_page_dots_store > a").addClass("wp-has-current-submenu current").removeClass("wp-not-current-submenu"),n("li#menu-posts").removeClass("wp-not-current-submenu wp-has-current-submenu wp-menu-open current"),n("li.mine").css("display","none"),n("li.publish").css("display","none"),n('a[href="admin.php?page='+sizeChartScriptObject.size_chart_get_started_page_slug+'"]').parent().addClass("current"),n(".page-title-action").remove()),"edit-size-chart"!==sizeChartScriptObject.size_chart_current_screen_id&&"size-chart"!==sizeChartScriptObject.size_chart_current_screen_id||(e.addClass("wp-has-current-submenu wp-menu-open menu-top menu-top-first").removeClass("wp-not-current-submenu"),n("#toplevel_page_dots_store > a").addClass("wp-has-current-submenu current").removeClass("wp-not-current-submenu"),n("li#menu-posts").removeClass("wp-not-current-submenu wp-has-current-submenu wp-menu-open current"),n("li.mine").css("display","none"),n("li.publish").css("display","none"),n('a[href="admin.php?page='+sizeChartScriptObject.size_chart_get_started_page_slug+'"]').parent().addClass("current"),n(".page-title-action").remove()),n("#toplevel_page_dots_store ul li").each(function(){void 0!==sizeChartScriptObject.size_chart_plugin_menu_url&&(sizeChartScriptObject.size_chart_plugin_name===n(this).text()&&n(this).find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url),sizeChartScriptObject.size_chart_plugin_menu_url===n(this).find("a").attr("href")&&n(this).find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url))}),"admin.php?page="+sizeChartScriptObject.size_chart_get_started_page_slug===e.find("a").attr("href")&&void 0!==sizeChartScriptObject.size_chart_plugin_menu_url&&e.find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url)},loadChartCategorySelect2:function(){n("#chart-categories").selectWoo({escapeMarkup:function(e){return e},maximumSelectionLength:100}).addClass("enhanced")},loadProductChartSelect2:function(){n(":input#prod-chart").filter(":not(.enhanced)").each(function(){var a=[],e={allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:n(this).data("minimum_input_length")?n(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:sizeChartScriptObject.size_chart_admin_url,dataType:"json",delay:1e3,data:function(e){return{searchQueryParameter:e.term,action:"size_chart_search_chart",security:n(this).data("nonce"),exclude:n(this).data("exclude")}},processResults:function(e){return a=[],e&&n.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}};n(this).selectWoo(e).addClass("enhanced")})},loadColorPicker:function(){n("#color-picker1,#color-picker2,#color-picker3,#color-picker4,#color-picker5,#color-picker6").wpColorPicker()},loadPreviewSizeChart:function(){n("a.preview_chart").click(function(){var e,t=n(this).attr("id"),a=sizeChartScriptObject.size_chart_plugin_dash_name+"-inline-css";n(".size-chart-model").css("padding","0"),n("#wait").show(),n("[data-remodal-id=modal]").html(""),e={action:"size_chart_preview_post",chartID:t,security:sizeChartScriptObject.size_chart_nonce},n.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:e,dataType:"json",beforeSend:function(){n("#wait").show().css("position","fixed")},complete:function(){n("#wait").hide().css("position","")},success:function(e){1===e.success?(n(".size-chart-model").css("padding","35px"),i.getElementById("md-size-chart-modal").style.display="block",n("#md-poup").after(e.html),n("#"+a).text(e.css)):alert("size-chart-for-woocommerc-premium==>"+e.msg)}})})},loadSizeChartProductMetaColumn:function(){n("#size-chart-menu-settings-column").bind("click",function(e){var t,a,i=n(e.target);i.hasClass("nav-tab-link")&&(t=i.data("type"),a=i.parents(".size-chart-accordion-section-content").first(),n("input",a).removeAttr("checked"),n(".tabs-panel-active",a).removeClass("tabs-panel-active").addClass("tabs-panel-inactive"),n("#"+t,a).removeClass("tabs-panel-inactive").addClass("tabs-panel-active"),n(".tabs",a).removeClass("tabs"),i.parent().addClass("tabs"),n(".quick-search",a).focus(),a.find(".tabs-panel-active .menu-item-title").length?a.removeClass("has-no-menu-item"):a.addClass("has-no-menu-item"),e.preventDefault())})},loadSizeChartProductMetaAjax:function(){n("div#tabs-panel-posttype-size-chart-all").on("click","ul.pagination li a.page-numbers",function(e){var t,a,i,r,s;e.preventDefault(),t={action:"size_chart_product_assign",pageNumber:n(this).data("page-number"),postID:n(this).data("post-id"),postPerPage:n(this).data("post-per-page"),security:n(this).parent().parent().data("nonce")},n.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:t,dataType:"json",beforeSend:function(){n("div#tabs-panel-posttype-size-chart-all .spinner").addClass("is-active")},complete:function(){n("div#tabs-panel-posttype-size-chart-all .spinner").removeClass("is-active")},success:function(e){!0===e.success&&(n("ul#size-chart-checklist-all").empty(),n.each(e.found_products,function(e,t){a=n("<li/>"),n("<a />",{href:t.href.replace("&#038;","&"),text:t.title}).appendTo(a),a.appendTo("ul#size-chart-checklist-all")}),n("nav.pagination-box ul.pagination").empty(),n.each(e.load_pagination,function(e,t){i=n("<li/>"),"number"===t.pagination_mode?r="span"===t.pagination_tag?n("<span />",{class:"page-numbers "+t.pagination_class,text:t.page_text}):(s="page-numbers ",""!==t.pagination_class&&(s+=t.pagination_class),n("<a />",{href:"javascript:void(0);",class:s,text:t.page_text,"data-post-id":t.post_id,"data-post-per-page":t.post_per_page,"data-page-number":t.page_number})):"dots"===t.pagination_mode&&(r=n("<span />",{class:"page-numbers "+t.pagination_class,text:t.page_text})),r.appendTo(i),i.appendTo("nav.pagination-box ul.pagination")}))}})}),n("div#tabs-panel-posttype-size-chart-search").on("input",".quick-search",function(){var s=n(this);s.attr("autocomplete","off"),t&&clearTimeout(t),t=setTimeout(function(){var e,t,a,i,r=s.val();r.length<2||(e=s.parents(".tabs-panel"),t={action:"size_chart_quick_search_products",security:s.data("nonce"),postType:s.data("post_type"),searchQueryParameter:r,type:s.attr("name")},n.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:t,dataType:"json",beforeSend:function(){n(".quick-search-wrap .spinner",e).addClass("is-active")},complete:function(){n(".quick-search-wrap .spinner",e).removeClass("is-active")},success:function(e){n("ul#size-chart-search-checklist").empty(),!0===e.success?n.each(e.found_products,function(e,t){a=n("<li/>").appendTo("ul#size-chart-search-checklist"),i=n("<label />",{for:"size-chart-product-"+e,text:t.title}),n("<input />",{type:"checkbox",id:"size-chart-product-"+e,value:t.id,class:"product-item-checkbox",name:"product-item["+t.id+"]"}).prependTo(i),i.appendTo(a)}):(a=n("<li/>").appendTo("ul#size-chart-search-checklist"),(i=n("<p />",{text:e.msg})).appendTo(a))}}))},500)})},deleteSizeChartImage:function(){n("a.delete-chart-image").click(function(){var e={action:"size_chart_delete_image",postID:n(this).attr("id"),security:sizeChartScriptObject.size_chart_nonce};n.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:e,beforeSend:function(){n("#wait").show().css("position","fixed")},complete:function(){n("#wait").hide().css("position","")},success:function(e){var t=n.parseJSON(e);1===t.success&&(n("#field-image img").attr({src:t.url,width:"",height:""}),n("#primary-chart-image").val(""),n(".delete-chart-image").css("display","none")),alert(t.msg)}})})},closeSizeChartModal:function(){n("div#md-size-chart-modal .remodal-close").click(function(){var e=i.getElementById("md-size-chart-modal");n(".chart-container").remove(),e.style.display="none"}),n("div.md-size-chart-overlay").click(function(){var e=i.getElementById("md-size-chart-modal");n(".chart-container").remove(),e.style.display="none"})},requiredSizeChartTitle:function(){n("body").on("submit.edit-post","#post",function(){var e,t,a;if(e=n("input#post_type").val(),sizeChartScriptObject.size_chart_post_type_name===e&&0===(t=n("#title")).val().replace(/ /g,"").length)return n("#size-chart-title-required-msg").length||(a=sizeChartScriptObject.size_chart_post_title_required,n("<div/>",{id:"size-chart-title-required-msg"}).appendTo("div#titlewrap"),n("<em/>",{text:a}).appendTo("#size-chart-title-required-msg"),n("input#title").css({border:"1px solid #c00","box-shadow":"0 0 2px rgb(204, 0, 0, 0.8)"})),n("#major-publishing-actions .spinner").hide(),n("#major-publishing-actions").find(":button, :submit, a.submitdelete, #post-preview").removeClass("disabled"),t.focus(),!1}),n("input#title").on("change",function(){n("#size-chart-title-required-msg").remove(),n("input#title").css({border:"1px solid #ddd"})})}};n(i).ready(a.init)}(jQuery,window,document);